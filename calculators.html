<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Hisab | Professional Zakat Suite</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&family=Cinzel:wght@700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --brand-green: #052e16;
            --gold: #c6a306;
            --white: #ffffff;
            --bg-light: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg-light); color: #1e293b; }

        /* Matching Header from Home Page */
        header { 
            background: var(--white); 
            box-shadow: 0 4px 20px rgba(0,0,0,0.05); 
            position: sticky; top: 0; z-index: 1000; padding: 12px 6%;
            display: flex; justify-content: space-between; align-items: center;
        }
        
        .logo-area { display: flex; align-items: center; text-decoration: none; gap: 10px; }
        .logo-icon { 
            background: var(--brand-green); color: var(--gold); 
            width: 35px; height: 35px; border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; font-size: 16px;
        }
        .site-name { font-family: 'Cinzel', serif; font-size: 20px; color: var(--brand-green); font-weight: bold; }

        .nav-right { display: flex; align-items: center; gap: 15px; }
        .home-link {
            background: var(--brand-green); color: var(--gold);
            text-decoration: none; font-weight: 800; font-size: 13px;
            padding: 8px 18px; border-radius: 6px; display: flex; align-items: center; gap: 8px;
            transition: 0.3s;
        }
        .home-link:hover { opacity: 0.9; transform: translateY(-1px); }

        /* Hero Sync Status */
        .hero-mini { background: var(--brand-green); color: white; padding: 40px 20px 80px; text-align: center; }
        .hero-mini h1 { font-family: 'Playfair Display', serif; font-size: 28px; margin-bottom: 10px; }
        .sync-status { color: #34d399; font-size: 11px; font-weight: 800; letter-spacing: 1px; }

        /* Real-time Ticker */
        .ticker-container { max-width: 1250px; margin: -40px auto 40px; padding: 0 20px; }
        .ticker-grid { 
            background: white; border-radius: 15px; padding: 20px; 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); 
            gap: 15px; box-shadow: 0 15px 30px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; 
        }
        .asset-box { text-align: center; padding: 10px; border-radius: 10px; transition: 0.3s; border: 1px solid #f1f5f9; }
        .asset-label { font-size: 10px; font-weight: 800; color: #64748b; text-transform: uppercase; margin-bottom: 5px; }
        .asset-price { font-size: 18px; font-weight: 900; color: var(--brand-green); font-variant-numeric: tabular-nums; }

        /* Animation for Live Sync */
        .up { background: #ecfdf5 !important; color: #10b981 !important; border-color: #10b981; }
        .down { background: #fef2f2 !important; color: #ef4444 !important; border-color: #ef4444; }

        /* Calculators Grid */
        .main-content { max-width: 1300px; margin: 0 auto 60px; padding: 0 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .card { background: white; border-radius: 16px; padding: 25px; border: 1px solid #e2e8f0; text-align: center; transition: 0.3s; }
        .card:hover { border-color: var(--gold); transform: translateY(-4px); }
        .card i { font-size: 24px; color: var(--gold); margin-bottom: 15px; }
        .card h3 { font-size: 16px; font-weight: 800; color: var(--brand-green); margin-bottom: 15px; }

        input { 
            width: 100%; padding: 12px; border: 2px solid #f1f5f9; border-radius: 10px; 
            margin-bottom: 12px; font-weight: 700; text-align: center; font-size: 16px; color: var(--brand-green);
        }
        input:focus { border-color: var(--gold); outline: none; }

        .calc-btn { 
            width: 100%; padding: 14px; background: var(--brand-green); color: white; 
            border: none; border-radius: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase;
        }
        .result { 
            margin-top: 15px; padding: 12px; background: #fdfbf7; border-radius: 10px; 
            display: none; font-size: 17px; font-weight: 900; color: var(--brand-green); border: 1px dashed var(--gold); 
        }

        footer { text-align: center; padding: 40px; color: #64748b; font-size: 13px; border-top: 1px solid #e2e8f0; }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="logo-area">
            <div class="logo-icon"><i class="fas fa-kaaba"></i></div>
            <div class="site-name">AL-HISAB</div>
        </a>
        <div class="nav-right">
            <a href="index.html" class="home-link"><i class="fas fa-home"></i> HOME</a>
        </div>
    </header>

    <section class="hero-mini">
        <h1>Precision Zakat Suite</h1>
        <div class="sync-status" id="wsStatus"><i class="fas fa-spinner fa-spin"></i> SYNCING BINANCE CLOUD...</div>
    </section>

    <div class="ticker-container">
        <div class="ticker-grid" id="tickerUI"></div>
    </div>

    <div class="main-content">
        <div id="mainGrid" class="grid"></div>
    </div>

    <footer>
        &copy; 2026 Al-Hisab Global Authority. Real-time Financial Integrity.
    </footer>

    <script>
        const G_FACTOR = 31.1034768; 
        const T_FACTOR = 11.6638;
        let rates = { gold: 0, tola: 0, btc: 0, eth: 0, sol: 0, bnb: 0, cash: 1 };
        let lastRates = { gold: 0, tola: 0, btc: 0, eth: 0, sol: 0, bnb: 0, cash: 1 };

        function connectBinance() {
            const streams = ['paxgusdt@ticker','btcusdt@ticker','ethusdt@ticker','solusdt@ticker','bnbusdt@ticker'];
            const ws = new WebSocket(`wss://stream.binance.com:9443/stream?streams=${streams.join('/')}`);

            ws.onmessage = (e) => {
                const data = JSON.parse(e.data);
                if(!data.data) return;
                const s = data.data.s;
                const p = parseFloat(data.data.c);

                if(s === 'PAXGUSDT') {
                    rates.gold = p / G_FACTOR;
                    rates.tola = (p / G_FACTOR) * T_FACTOR;
                } 
                else if(s === 'BTCUSDT') rates.btc = p;
                else if(s === 'ETHUSDT') rates.eth = p;
                else if(s === 'SOLUSDT') rates.sol = p;
                else if(s === 'BNBUSDT') rates.bnb = p;

                document.getElementById('wsStatus').innerHTML = '<i class="fas fa-circle"></i> LIVE SYNC ACTIVE';
                renderTicker();
                setTimeout(() => { lastRates = {...rates}; }, 600);
            };

            ws.onclose = () => {
                document.getElementById('wsStatus').innerText = 'RECONNECTING...';
                setTimeout(connectBinance, 2000);
            };
        }

        function renderTicker(){
            const ui = document.getElementById('tickerUI');
            const list = [
                {l: 'Gold (1g)', v: rates.gold, k: 'gold'},
                {l: 'Gold (1 Tola)', v: rates.tola, k: 'tola'},
                {l: 'Bitcoin', v: rates.btc, k: 'btc'},
                {l: 'Ethereum', v: rates.eth, k: 'eth'},
                {l: 'Solana', v: rates.sol, k: 'sol'},
                {l: 'Binance', v: rates.bnb, k: 'bnb'}
            ];

            ui.innerHTML = list.map(i => {
                let cls = '';
                if(i.v > lastRates[i.k] && lastRates[i.k] !== 0) cls = 'up';
                else if(i.v < lastRates[i.k] && lastRates[i.k] !== 0) cls = 'down';

                return `<div class="asset-box ${cls}">
                    <div class="asset-label">${i.l}</div>
                    <div class="asset-price">$${(i.v || 0).toLocaleString(undefined, {minimumFractionDigits: 4, maximumFractionDigits: 4})}</div>
                </div>`;
            }).join('');
        }

        const config = [
            {id:'gold', title:'Gold (Grams)', key:'gold', u:'Grams', i:'fa-ring'},
            {id:'tola', title:'Gold (Tolas)', key:'tola', u:'Tolas', i:'fa-gem'},
            {id:'btc', title:'Bitcoin', key:'btc', u:'BTC Amount', i:'fa-brands fa-bitcoin'},
            {id:'eth', title:'Ethereum', key:'eth', u:'ETH Amount', i:'fa-brands fa-ethereum'},
            {id:'cash', title:'Cash & Savings', key:'cash', u:'USD Amount', i:'fa-money-bill-wave'},
            {id:'biz', title:'Business Stock', key:'cash', u:'Market Value', i:'fa-store'},
            {id:'real', title:'Real Estate', key:'cash', u:'Market Value', i:'fa-building'},
            {id:'stocks', title:'Stock Equity', key:'cash', u:'Market Value', i:'fa-chart-line'},
            {id:'loan', title:'Receivables', key:'cash', u:'Amount', i:'fa-hand-holding-dollar'},
            {id:'jewelry', title:'Other Jewelry', key:'cash', u:'Market Value', i:'fa-gem'},
            {id:'salary', title:'Saved Salary', key:'cash', u:'Amount', i:'fa-envelope-open-dollar'},
            {id:'agri', title:'Agri Production', key:'cash', u:'Total Kg', i:'fa-wheat-awn'},
            {id:'pension', title:'Pension Fund', key:'cash', u:'Value', i:'fa-piggy-bank'},
            {id:'car', title:'Trade Vehicles', key:'cash', u:'Market Value', i:'fa-car'},
            {id:'nisab', title:'Nisab Checker', key:'cash', u:'Total Assets', i:'fa-scale-balanced'}
        ];

        function init(){
            const grid = document.getElementById('mainGrid');
            grid.innerHTML = config.map(c => `
                <div class="card">
                    <i class="fas ${c.i}"></i>
                    <h3>${c.title}</h3>
                    <input type="number" id="inp-${c.id}" placeholder="Enter ${c.u}...">
                    <button class="calc-btn" onclick="execute('${c.id}')">Calculate</button>
                    <div class="result" id="res-${c.id}">$0.00</div>
                </div>
            `).join('');
            connectBinance();
        }

        window.execute = function(id) {
            const val = parseFloat(document.getElementById(`inp-${id}`).value) || 0;
            const item = config.find(x => x.id === id);
            const resDiv = document.getElementById(`res-${id}`);
            let rate = (item.key === 'cash') ? 1 : rates[item.key];

            if(id === 'nisab') {
                const threshold = rates.gold * 87.48; 
                resDiv.innerText = val >= threshold ? "ZAKAT DUE" : "BELOW NISAB";
                resDiv.style.color = val >= threshold ? "#10b981" : "#ef4444";
            } else if(id === 'agri') {
                resDiv.innerText = "Ushr: " + (val * 0.1).toFixed(2) + " Kg";
            } else {
                let zakat = (val * rate) * 0.025;
                resDiv.innerText = "Zakat: $" + zakat.toLocaleString(undefined, {minimumFractionDigits: 2});
            }
            resDiv.style.display = 'block';
        }

        window.onload = init;
    </script>
</body>
</html>
